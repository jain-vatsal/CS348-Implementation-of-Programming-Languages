# Introduction
 The provided code consists of 3 parts - pass1.cpp, pass2.cpp and linkerLoader.cpp

## Commands to run : (copy and paste the below commands together in the terminal)
PLEASE MAKE SURE THE DIRECTORIES AS LISTED AS IN THE ORIGINAL FOLDER(inputFiles,outputFromPass1,putputFromPass2,outputFromLinkerLoader,runningCommands) before running the code.

g++ -g pass1.cpp
./a.exe 
g++ -g pass2.cpp
./a.exe
g++ -g linkerLoader.cpp
./a.exe 

programAddress to be entered = 0 (or chosen otherwise)

# Code explanation

## pass1.cpp: 
This file contains the implementation of the first pass of the assembler. In the two-pass assembly process, the first pass performs the following tasks:

Reads the source code of the SIC/XE program from an input file.
Generates an intermediate file containing the modified source code with additional information such as addresses and machine instructions.
Builds and maintains the symbol table, which maps symbols (labels and identifiers) to their corresponding addresses in memory.
Builds and maintains the literal table, which stores literal values encountered in the program.
Handles instructions, directives, and pseudo-operations defined in the SIC/XE assembly language.
Produces output files including the intermediate file, symbol table, and literal table.


## pass2.cpp: 
This file contains the implementation of the second pass of the assembler. In the second pass, the assembler performs the following tasks:

Reads the intermediate file generated by the first pass.
Processes the instructions and directives to generate the final object code.
Handles expressions, including evaluating complex expressions involving symbols and literals.
Generates Revised Modification records, Define records, and Refer records as required.
Produces the final object code for the SIC/XE program.
Outputs the object code to a file for use by the linker loader.


## linkerLoader.cpp: 

This file contains the implementation of the two-pass linking loader for the SIC/XE machine assembly language. The linker loader performs the following tasks:

Reads the object code files generated by the assembler.
Resolves external references and resolves address dependencies between different object files.
Generates load modules by combining and loading multiple object files.
Produces a load map detailing the memory layout of the linked program, including the starting addresses and lengths of each module.
Handles extended format instructions such as +JSUB.
Outputs the load map to a file for reference.
These three parts work together to assemble and link SIC/XE machine language programs, starting from the source code files and ending with a loadable executable program. Each part plays a crucial role in the overall process, ensuring that the program is correctly translated into machine code and ready for execution on the SIC/XE architecture.


# Function and variables in brief

## pass1.cpp

### removeBlankSpaces(string s): 
Removes blank spaces from a given string.
### numberToHexaDecimal(int num): 
Converts a number to a hexadecimal string.
### numberFormatter(int actualNumber, int desiredWidth, char filler = '0'): 
Formats a number to a desired width with a specified filler character.
### stringFormatter(string name, int desiredWidth, char pad = ' '): 
Formats a string to a desired width with a specified padding character.
### is_number(string s): 
Checks if a given string represents a number.
### apply_mask(int &value, int bits): 
Applies a mask to a value based on the number of bits.
### OPTAB(string opcode): 
Maps an opcode to its corresponding format and code.
### precedence(string op): 
Determines the precedence of operators.
### apply_operator(pii a, pii b, string op): 
Applies an operator on two operands.
### tokenize(string exp): 
Tokenizes an expression.
### evaluate(string exp, string CSECT): 
Evaluates an expression.
### main(): 
The main function that reads input from a file, processes it, and generates output files.
### symbolTable: 
A map to store the symbol table.
### literalTable: 
A map to store the literal table.
### EXTREF: 
A set to store external references.
### CSECT: 
A string to represent the current control section.
### locationCounter: 
Tracks the current location counter.
### startingAddress: 
Represents the starting address of the program.
### LENGTH: 
Represents the length of the program.
### label, opcode, operands: 
Variables to store the label, opcode, and operands of each instruction.
### length: 
Stores the length of the instruction.
### i, n, p, b, e, x: 
Flags representing addressing modes.
### literal: 
Indicates whether a value is a literal.
### offset: 
Offset for each field in the line.


## pass2.cpp 

### removeBlankSpaces(string s):
This function removes blank spaces from the input string s.
### numberToHexaDecimal(int num):
Converts an integer num to a hexadecimal string.
### numberFormatter(int actualNumber, int desiredWidth, char filler = '0'):
Formats a number (actualNumber) with a desired width (desiredWidth) and filler character (filler).
### stringFormatter(string name, int desiredWidth, char pad = ' '):
Formats a string (name) with a desired width (desiredWidth) and padding character (pad).
### is_number(string s):
Checks if a given string s represents a number.
### apply_mask(int &value, int bits):
Applies a mask to an integer value value based on the number of bits specified.
### OPTAB(string opcode):
Maps opcodes to their respective opcode format and machine code using a predefined table.
### SYMBOL struct:
Represents a symbol with attributes such as Control Section (CSECT) and name.
### VALUE struct:
Represents a value with attributes like value, length, and type.
### symbolTable map:
Stores symbols along with their corresponding values.
### literalTable map:
Stores literals along with their corresponding values.
### symbolTableReader() and literalTableReader():
Functions to read data from files (symbolTable.txt and literalTable.txt) and populate symbolTable and literalTable respectively.
### EXTREF set:
A set to store external references.
### precedence(string op):
Determines the precedence of an operator for arithmetic expressions.
### apply_operator(pii a, pii b, string op):
Applies the given operator on two pairs of integers.
### tokenize(string exp):
Tokenizes an arithmetic expression string.
### evaluate(string exp, string CSECT):
Evaluates an arithmetic expression using stacks.
### instruction struct:
Represents an instruction with attributes like label, opcode, operands, and flags for addressing modes.


## linkerLoader.cpp

### programAddress: 
Represents the starting address of the program.
### lastAddress: 
Stores the last address of the program.
### memory: 
A vector representing the memory with a size of (1 << 18) initialized with "xx" to indicate empty memory locations.
### externalSymbolTable: 
A map where keys are external symbols and values are their corresponding addresses.
### passOneOfLinkerLoader(string input): 
This function performs the first pass of the linker-loader process. It reads an input file containing records, processes header records to populate the external symbol table (ESTAB), and processes define records to add symbols to the ESTAB. It updates programAddress and lastAddress based on the control sections' addresses and lengths.
### removeBlankSpaces(string s): 
Removes blank spaces from a given string s.
### numberToHexaDecimal(int num): 
Converts a number num to a hexadecimal string.
### numberFormatter(int actualNumber, int desiredWidth, char filler = '0'): 
Formats a number actualNumber to a desired width desiredWidth with an optional filler character.
### stringFormatter(string name, int desiredWidth, char pad = ' '): 
Formats a string name to a desired width desiredWidth with an optional padding character.
### passTwoOfLinkerLoader(string input): 
Performs the second pass of the linker-loader process. It reads an input file containing records, processes header, text, and modification records. It updates the memory vector based on the object code, modifies memory content as per modification records, and prints the starting execution address.
### formatmemory(): 
Formats memory content and writes it to a file named "memory.txt".
### printmemory(): 
Prints memory content line by line with addresses and instructions to a file named "lineByLine.txt".
### main(): 
The main function calls passOneOfLinkerLoader, passTwoOfLinkerLoader, formatmemory, and printmemory functions in sequence to execute the linker-loader process.